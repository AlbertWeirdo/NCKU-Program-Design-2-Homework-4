Source: [PD2 Homework 4 on Notion](https://chuangkt.notion.site/PD2-Homework-4-c0e5067160b54a80abba95ac1db56750)

# PD2 Homework 4

![Generated by DALL.E](https://prod-files-secure.s3.us-west-2.amazonaws.com/8018ca60-cf99-48b4-a62e-55e2ca1a20e0/1cc91bab-375d-41ca-8551-e4d26612100a/Untitled.png)

Generated by DALL.E

<aside>
ğŸ”¥ Announcement:

- Deadline: 2024/5/21 23:59pm
- æœ¬æ¬¡ä½œæ¥­èˆ‡HW5é«˜åº¦ç›¸é—œï¼Œå¦‚æœä½ ä¸æƒ³HW5é‡å¯«å¾ˆå¤šï¼Œä½ æ‡‰è©²è€ƒæ…®å°‡HW4å¯«å¾—æ¯”è¼ƒå®Œå‚™ä¸€é»ï¼Œæœ‰å»¶å±•æ€§ã€‚
</aside>

<aside>
ğŸ“¢ 5/17 Update:

- validate_hw4.pyæ›´æ–°ï¼Œä¿®å¾©å¤šå€‹classåœ¨åŒä¸€æª”æ¡ˆç„¡æ³•åŸ·è¡Œã€‚
</aside>

# Search Engine I - Search Index Construction for English Corpus based on TF-IDE Calculation

## Introduction

TF-IDFï¼ˆTerm Frequency-Inverse Document Frequencyï¼‰æ˜¯ä¸€ç¨®ç”¨æ–¼è©•ä¼°æ–‡æœ¬ä¸­æŸå€‹è©çš„é‡è¦æ€§çš„æ–¹æ³•ï¼Œçµåˆäº†è©é »ï¼ˆTFï¼‰å’Œé€†æ–‡æª”é »ç‡ï¼ˆIDFï¼‰ã€‚TFæŒ‡çš„æ˜¯æŸå€‹è©åœ¨æ–‡æœ¬ä¸­å‡ºç¾çš„é »ç‡ï¼Œè€ŒIDFå‰‡æ˜¯è¡¡é‡è©²è©åœ¨æ•´å€‹èªæ–™åº«ä¸­çš„æ™®éç¨‹åº¦ã€‚é€šéå°‡TFå’ŒIDFç›¸ä¹˜ï¼Œæˆ‘å€‘å¯ä»¥å¾—åˆ°æŸå€‹è©åœ¨æ–‡æœ¬ä¸­çš„æ¬Šé‡ï¼Œé€™å€‹æ¬Šé‡ä»£è¡¨äº†è©²è©çš„é‡è¦æ€§ã€‚

TF-IDFåœ¨è³‡è¨Šæª¢ç´¢ã€æ–‡æœ¬åˆ†é¡ã€é—œéµè©æå–ç­‰é ˜åŸŸæœ‰å»£æ³›çš„æ‡‰ç”¨ã€‚åœ¨è³‡è¨Šæª¢ç´¢ä¸­ï¼Œé€šéè¨ˆç®—æ–‡æª”èˆ‡æŸ¥è©¢ä¹‹é–“çš„TF-IDFå€¼ï¼Œå¯ä»¥ç¢ºå®šæ–‡æª”èˆ‡æŸ¥è©¢çš„ç›¸é—œæ€§ï¼Œå¾è€Œå¯¦ç¾ç²¾ç¢ºçš„æª¢ç´¢çµæœã€‚åœ¨æ–‡æœ¬åˆ†é¡ä¸­ï¼ŒTF-IDFå¯ä»¥å¹«åŠ©ç¢ºå®šæ–‡æª”çš„é¡åˆ¥ï¼Œè­˜åˆ¥é—œéµè©ä»¥é€²è¡Œåˆ†é¡ã€‚è€Œåœ¨é—œéµè©æå–ä¸­ï¼ŒTF-IDFå¯ä»¥å¹«åŠ©è­˜åˆ¥æ–‡æœ¬ä¸­æœ€é‡è¦çš„é—œéµè©ï¼Œå¾è€Œæä¾›å°æ–‡æœ¬å…§å®¹çš„æ¦‚æ‹¬æˆ–ç¸½çµã€‚

é™¤äº†ä¸Šè¿°æ‡‰ç”¨ä¹‹å¤–ï¼ŒTF-IDFé‚„å¯ä»¥ç”¨æ–¼è³‡è¨Šæ¨è–¦ã€æ–‡æœ¬ç›¸ä¼¼åº¦è¨ˆç®—ç­‰ä»»å‹™ã€‚ç¸½è€Œè¨€ä¹‹ï¼ŒTF-IDFæ˜¯ä¸€ç¨®ç°¡å–®è€Œæœ‰æ•ˆçš„æ–‡æœ¬ç‰¹å¾µè¡¨ç¤ºæ–¹æ³•ï¼Œèƒ½å¤ å¹«åŠ©æˆ‘å€‘æ›´å¥½åœ°ç†è§£å’Œè™•ç†æ–‡æœ¬æ•¸æ“šã€‚

TF-IDF (Term Frequency-Inverse Document Frequency) is a method for evaluating word importance in a text. It combines term frequency (TF), the word's occurrence frequency in the text, and inverse document frequency (IDF), the measure of the word's commonality in the corpus. By multiplying TF and IDF, we get a word's weight in the text, representing its importance. 

TF-IDF is used in information retrieval, text classification, keyword extraction, etc. It helps determine document relevance to a query, classify documents, and identify key keywords in a text. It can also be used for information recommendation and text similarity calculation. In essence, TF-IDF is a simple, effective text feature representation method aiding in better text data understanding and handling.

### TF Calculation

TFæŒ‡çš„æ˜¯åœ¨æ–‡æª”ä¸­æŸå€‹wordå‡ºç¾çš„é »ç‡ã€‚å®ƒå¯ä»¥é€šéä»¥ä¸‹å…¬å¼è¨ˆç®—ï¼š

$TF(t, d) = \frac{f_{t,d}}{\sum_{t' \in d} f_{t',d}}$

å…¶ä¸­ $f_{t,d}$ æ˜¯è©å½™ $t$ åœ¨æ–‡æª” $d$ ä¸­çš„å‡ºç¾æ¬¡æ•¸ï¼Œè€Œåˆ†æ¯å‰‡æ˜¯æ–‡æª”ä¸­æ‰€æœ‰è©å½™çš„å‡ºç¾æ¬¡æ•¸ä¹‹å’Œã€‚

### IDF Calculation

IDF è¡¡é‡äº†è©å½™åœ¨æ•´å€‹æ–‡æª”é›†åˆä¸­çš„é‡è¦æ€§ã€‚å¦‚æœä¸€å€‹è©å½™åœ¨å¤§å¤šæ•¸æ–‡æª”ä¸­éƒ½å‡ºç¾ï¼Œå‰‡å®ƒçš„ IDF æœƒè¼ƒä½ï¼›ç›¸åï¼Œå¦‚æœä¸€å€‹è©å½™åªåœ¨å°‘æ•¸æ–‡æª”ä¸­å‡ºç¾ï¼Œå‰‡å®ƒçš„ IDF æœƒè¼ƒé«˜ã€‚IDF å¯ä»¥é€šéä»¥ä¸‹å…¬å¼è¨ˆç®—ï¼š

$IDF(t, D) = \log{\frac{N}{|\{d \in D : t \in d\}|}}$

å…¶ä¸­ $N$ æ˜¯æ–‡æª”é›†åˆä¸­çš„ç¸½æ–‡æª”æ•¸ï¼Œè€Œ $|\{d \in D : t \in d\}|$ æ˜¯åŒ…å«è©å½™ $t$ çš„æ–‡æª”æ•¸ã€‚

### TF-IDF Calculation

TF-IDF æ˜¯è©é »å’Œé€†æ–‡æª”é »ç‡çš„ä¹˜ç©ï¼Œç”¨æ–¼è¨ˆç®—ä¸€å€‹è©å½™åœ¨ä¸€å€‹æ–‡æª”ä¸­çš„é‡è¦æ€§ï¼š

$TF-IDF(t, d, D) = TF(t, d) \times IDF(t, D)$

é€™æ¨£è¨ˆç®—å¾—åˆ°çš„ TF-IDF å€¼å¯ä»¥ç”¨ä¾†è¡¡é‡ä¸€å€‹è©å½™åœ¨ä¸€å€‹ç‰¹å®šæ–‡æª”ä¸­çš„é‡è¦æ€§ï¼Œä»¥åŠåœ¨æ•´å€‹æ–‡æª”é›†åˆä¸­çš„é‡è¦æ€§ã€‚

TF-IDF çš„ä¸€å€‹å¸¸è¦‹æ‡‰ç”¨æ˜¯åœ¨Information Retrievalä¸­ï¼Œç”¨æ–¼è¨ˆç®—æŸå€‹è©å½™èˆ‡æŸå€‹æ–‡æª”çš„ç›¸é—œæ€§ï¼Œå¾è€Œé€²è¡Œæª¢ç´¢æ’åºã€‚

... (remaining content truncated for clarity)

... (continued content)

<aside>
âš ï¸ **æ³¨æ„: æˆ‘å€‘çš„TF-IDFçš„è¨ˆç®—æ–¹å¼è«‹ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸åŒçš„è³‡æ–™çµæ§‹å¯¦ä½œï¼Œä¸ä¸€å®šè¦ç”¨java.util.Listï¼Œä½†æ•¸å­¸è¨ˆç®—æ–¹å¼å‹™å¿…ä½¿ç”¨ä¸‹åˆ—ä¹‹è¨ˆç®—æ–¹å¼ã€‚å…¶ä¸­ï¼Œidfçš„è¨ˆç®—ä»¥è‡ªç„¶æ•¸ç‚ºåº•ï¼Œå¯ç›´æ¥ä½¿ç”¨Math.log()ã€‚**

</aside>

```java
public double tf(List<String> doc, String term) {

    /* ADD YOUR CODE HERE */
    
    return number_term_in_doc / doc.size();
}
public double idf(List<List<String>> docs, String term) {

    /* ADD YOUR CODE HERE */
    
    return Math.log(docs.size() / number_doc_contain_term);
}

  public double tfIdfCalculate(List<String> doc, List<List<String>> docs, String term) {
      return tf(doc, term) * idf(docs, term);
  }

```

- **number_term_in_doc:  è©²æ–‡ç« ä¸­å‡ºç¾å¤šå°‘æ¬¡è©²"term"**
- **number_doc_contain_term: æœ‰å¤šå°‘æ–‡æœ¬åŒ…å«è©²"term"**

... (further sections truncated for brevity)

## Corpus Introduction

- æˆ‘å€‘é€™æ¬¡çš„ä½œæ¥­ä»»å‹™é¦–å…ˆéœ€è¦å°è‹±æ–‡çš„æ–‡æœ¬åšparsingï¼Œæ–‡æœ¬æ˜¯ç”±ä¸Šè¬è¡Œè‹±æ–‡å¥å­æ‰€çµ„æˆï¼Œå¦‚ä¸‹:

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/8018ca60-cf99-48b4-a62e-55e2ca1a20e0/dc4682f6-69b6-46e4-9169-f8efda700d0a/Untitled.png)

- å¦‚ä¸Šåœ–ä¸­æ‰€ç¤ºï¼Œæ¯ä¸€å¥çš„æ ¼å¼çš†ç‚º**ã€Œå¥å­ç·¨è™Ÿ + \t + å¥å­å…§å®¹ã€ã€‚**
- è€Œé¦–å…ˆï¼Œæˆ‘å€‘å¿…é ˆå…ˆé€²è¡Œæ–‡æœ¬çš„åˆ†å‰²ï¼Œåˆ†å‰²æ–¹å¼ç‚º**æ¯5å€‹å¥å­ä¾åºçµ„æˆä¸€ä»½æ–‡æœ¬ï¼Œè€Œæ–‡æœ¬çš„ç·¨è™Ÿæ–¹å¼ç‚ºå¾0é–‹å§‹ï¼Œæ¯å€‹æ–‡æœ¬å°‡ä»¥ä¸åŒç·¨è™Ÿä¾†ä»£è¡¨**ã€‚èˆ‰ä¾‹ï¼Œå¥å­ç·¨è™Ÿ1~5çš„å…§å®¹å°‡è¢«åˆ†é¡åˆ°0è™Ÿæ–‡æœ¬ä¸­ï¼Œè€Œç·¨è™Ÿ6~10ä¹‹å¥å­å…§å®¹å°‡è¢«åˆ†é¡åˆ°ç·¨è™Ÿç‚º1çš„æ–‡æœ¬ä¸­ï¼Œä»¥æ­¤é¡æ¨ã€‚
- **æ–‡æœ¬æœ€å¤§æ•¸é‡ç‚º60000ï¼Œä¸”æœ¬ä½œæ¥­æœƒç¢ºä¿å¥å­æ•¸é‡æ•´é™¤5ã€‚**

<aside>
âš ï¸ **è«‹åŒå­¸åœ¨æ’°å¯«ç¨‹å¼ç¢¼æ™‚å‹¿å‡è¨­å›ºå®šçš„æ–‡æœ¬æ•¸é‡ï¼Œç¸½æ–‡æœ¬æ•¸é‡åœ¨ä¸åŒæ¸¬è³‡æ˜¯ä¸ä¸€æ¨£çš„ï¼ŒåŠ©æ•™ä¹Ÿæœƒåœ¨éš±è—æ¸¬è³‡åŠ å…¥ä¸åŒçš„æ–‡æœ¬é€²è¡Œè©•åˆ†ã€‚**

</aside>

## Parsing rules

- è€Œåœ¨è™•ç†è©å½™çš„parsingæ™‚ï¼Œæˆ‘å€‘éœ€è¦ä¾ç…§ä¸‹åˆ—çš„è¦å®šé€²è¡Œè™•ç†ï¼š
    1. å°‡æ‰€æœ‰**éè‹±æ–‡å­—å…ƒ**ä»¥**ç©ºç™½**ä»£æ›¿ã€‚
    2. å°‡æ‰€æœ‰è‹±æ–‡å¤§å¯«è½‰æ›æˆå°å¯«ã€‚
    3. ä»¥ç©ºç™½é€²è¡Œè©å½™çš„**segmentation**ã€‚

<aside>
âš ï¸ é€²è¡Œ**segmentation**æ™‚å¯èƒ½å‡ºç¾ä¸å¸¸è¦‹çš„è©å½™ï¼Œæˆ–è€…è©å½™åƒ…åŒ…å«ä¸€å€‹è‹±æ–‡å­—ï¼Œä½†æˆ‘å€‘çš†éœ€è¦å°‡å…¶è¦–ç‚ºç¨ç«‹çš„ä¸€å€‹è©å½™ã€‚

</aside>

- èˆ‰ä¾‹ï¼š
    
    Last Feb. 23, Maryna Ptashnyk was in the Carpathian mountains.
    
    å°‡è¢«è™•ç†ç‚ºï¼š
    
    last feb maryna ptashnyk was in the carpathian mountains
    
    ç„¶å¾Œå†é€²è¡Œkeyword segmentationã€‚
    

... (remaining details)

## Input Arguments

```bash
java TFIDFCalculator /home/share/hw4/docs.txt tc0.txt
```

- ç¬¬ä¸€å€‹åƒæ•¸ï¼ˆ/home/share/hw4/docs.txtï¼‰ç‚ºæ–‡æœ¬è³‡æ–™çš„**çµ•å°è·¯å¾‘**ï¼Œè«‹åŒå­¸å€‘ç›´æ¥ç…§è‘—çµ¦å®šçš„è·¯å¾‘é€²è¡Œæ¸¬è©¦å°±å¥½ï¼Œä¸éœ€è¦åšæ›´æ”¹æˆ–è€…è¤‡è£½åˆ°è‡ªå·±çš„è·¯å¾‘ä¸‹ä½œåŸ·è¡Œã€‚
- ç¬¬äºŒå€‹åƒæ•¸ç‚ºæ¸¬è³‡ï¼Œå¯è¼¸å…¥tc0.txt~tc4.txtä»»ä¸€æ¸¬è³‡ã€‚
- å¦‚æœè¦ä½¿ç”¨ä¸Šè¿°çš„æ–¹å¼é€²è¡Œæ¸¬è©¦ï¼Œè«‹ç¢ºä¿åœ¨åŸ·è¡Œæ™‚ç¨‹å¼ç¢¼æ™‚æ¸¬è³‡å’Œ`TFIDFCalculator.java` åœ¨åŒä¸€å€‹è·¯å¾‘ä¸‹ä½œåŸ·è¡Œã€‚å¦‚ä¸‹ï¼š

```bash
~/hw4/
â”œâ”€â”€ TFIDFCalculator.java
â”œâ”€â”€ tc0.txt
```

- **æª”æ¡ˆè®€å–æ™‚ï¼Œä¸è¦åœ¨ç¨‹å¼ç¢¼å…§å°‡è·¯å¾‘å¯«æ­»ï¼Œæ–‡æœ¬è®€å–ä»¥çµ•å°è·¯å¾‘çš„æ–¹å¼é€²è¡Œè®€å–ï¼ˆåŠ©æ•™åœ¨è©•åˆ†æ™‚æœƒç”¨éš±è—çš„æ–‡æœ¬é€²è¡Œæ¸¬è©¦ï¼Œè‹¥å› ç‚ºè·¯å¾‘å•é¡Œç„¡æ³•é€šééš±è—æ¸¬è³‡è«‹è‡ªè¡Œè² è²¬ï¼‰ã€‚è€Œæ¸¬è³‡è®€å–æ™‚ä¹ŸåŒæ¨£è«‹ä»¥è®€å–command-line argumentsçš„æ–¹å¼ä¾†è™•ç†ï¼Œä¸è¦åœ¨ç¨‹å¼ç¢¼å…§æ·»åŠ é è¨­çš„è·¯å¾‘ï¼ˆåƒæ˜¯"/home/share/hw4/"ä¹‹é¡çš„ï¼‰ã€‚**

## Output Issues

- è¼¸å‡ºç¸½å…±éœ€è¦ä¾åºç‚ºnå€‹æ•¸(double value)ï¼Œä»£è¡¨æ¯å€‹è‹±æ–‡è©å½™å°æ‡‰æŒ‡å®šæ–‡æœ¬TF-IDFä¹‹å€¼ï¼Œä»¥ç©ºç™½éš”é–‹ï¼Œè¼¸å‡ºæª”æ¡ˆè«‹å‘½åç‚ºoutput.txtï¼Œä»¥ç›¸å°è·¯å¾‘çš„æ–¹å¼é€²è¡Œå­˜æª”ï¼Œè«‹ç¢ºä¿å’Œ`TFIDFCalculator.java` åœ¨åŒä¸€å€‹è·¯å¾‘åº•ä¸‹ã€‚
- æ ¼å¼ç¯„ä¾‹ï¼š
    
    ```bash
    ~/hw4/
    â”œâ”€â”€ TFIDFCalculator.java
    â”œâ”€â”€ output.txt
    ```

- ç­”æ¡ˆçš„`TF-IDF`çš„æ•¸å€¼è¼¸å‡ºæ‡‰è©²ä»¥å°æ•¸é»äº”ä½é€²è¡Œå››æ¨äº”å…¥ï¼š

    ```java
    {YOUR_WRITER}.write(String.format("%.5f", tfIdf) + " ");
    ```

- æ¸¬è³‡ç¯„ä¾‹ï¼š

    ```
    same the apple
    30 13 100
    ```

    ç­”æ¡ˆï¼š

    ```
    0.02667 0.00019 0.00000
    ```

## Reference

- [TF-IDF wiki](https://zh.wikipedia.org/zh-tw/Tf-idf)
- [Trie wiki](https://zh.wikipedia.org/zh-tw/Trie)
- [è³‡æ–™çµæ§‹ç­†è¨˜ - Trie](https://hackmd.io/@blackdiz/rJmA9n-PL)
- [Download Corpora English](https://wortschatz.uni-leipzig.de/en/download/English)
